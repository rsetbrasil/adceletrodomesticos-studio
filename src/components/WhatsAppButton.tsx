
'use client';

import { useSettings } from '@/context/SettingsContext';
import { Button } from '@/components/ui/button';
import Link from 'next/link';

const WhatsAppIcon = () => (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 24 24"
      fill="currentColor"
      className="w-8 h-8"
    >
      <path d="M16.75 13.96c-.25.13-.58.25-.9.38-.31.12-.62.25-.92.37-.31.13-.6.13-.87.13-.28 0-.56-.12-.84-.25-.28-.12-.55-.25-.81-.37-.26-.13-.52-.25-.78-.38-.26-.12-.52-.25-.78-.37-.26-.13-.52-.13-.78-.13-.26 0-.52.13-.78.25-.26.13-.52.25-.78.38-.26.12-.52.25-.78.37-.26.13-.52.13-.78 0-.26-.12-.52-.25-.78-.37a.97.97 0 0 1-.6-.92c0-.26.1-.52.25-.78.13-.26.25-.52.38-.78.12-.26.25-.52.37-.78.13-.26.13-.52 0-.78-.12-.26-.25-.52-.37-.78-.13-.26-.25-.52-.38-.78-.15-.26-.25-.52-.25-.78s.1-.52.25-.78c.15-.26.3-.52.47-.78l.47-.6c.18-.25.36-.5.56-.73.2-.23.4-.46.6-.68.2-.23.4-.46.6-.68.2-.23.4-.35.6-.47.2-.12.4-.24.6-.36s.4-.24.6-.36c.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0l.47-.6c.18-.25.36-.5.56-.73.2-.23.4-.46.6-.68.2-.23.4-.46.6-.68.2-.23.4-.35.6-.47.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.3.12.5 0 .2-.12.3-.24.5-.36.2-.12.3-.24.5-.36s.3-.12.5 0c.2.12.3.24.5.36.2.12.3.24.5.36s.3.12.5 0 .3-.24.5-.36.3-.24.5-.36.3-.12.5 0 .3.24.5.36.3.24.5.36.3.12.5 0 .3-.24.5-.36.3-.24.5-.36c.2-.12.3-.12.5 0 .2.12.3.24.5.36.2.12.3.24.5.36.2.12.3.12.5 0 .2-.12.3-.24.5-.36.2-.12.3-.24.5-.36.2-.12.3-.12.5 0l.47.6c.18.25.36.5.56.73.2.23.4.46.6.68.2.23.4.46.6.68.2.23.4.35.6.47.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36s.4-.12.6 0l.47.6c.18.25.36.5.56.73.2.23.4.46.6.68.2.23.4.46.6.68.2.23.4.35.6.47.2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36s.4.24.6.36c.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36s.4-.12.6 0l.47.6c.18.25.36.5.56.73.2.23.4.46.6.68.2.23.4.46.6.68.2.23.4.35.6.47.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36s.4-.24.6-.36c.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36s.4-.24.6-.36c.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36s.4-.12.6 0 .4.24.6.36.4.24.6.36c.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36s.4-.24.6-.36c.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 0 .2.12.4.24.6.36.2.12.4.24.6.36.2.12.4.12.6 0 .2-.12.4-.24.6-.36.2-.12.4-.24.6-.36.2-.12.4-.12.6 Vespasiano, 24 de julho de 2024." />
    </svg>
  );

export default function WhatsAppButton() {
  const { settings } = useSettings();

  if (!settings.storePhone) return null;

  const phoneNumber = settings.storePhone.replace(/\D/g, '');
  const message = encodeURIComponent(`Olá! Gostaria de mais informações sobre os produtos.`);
  const whatsappUrl = `https://wa.me/55${phoneNumber}?text=${message}`;

  return (
    <div className="fixed bottom-6 right-6 z-50 print-hidden">
      <Button
        asChild
        size="icon"
        className="w-16 h-16 rounded-full bg-green-500 hover:bg-green-600 text-white shadow-lg transition-transform hover:scale-110"
        aria-label="Fale conosco pelo WhatsApp"
      >
        <Link href={whatsappUrl} target="_blank" rel="noopener noreferrer">
          <WhatsAppIcon />
        </Link>
      </Button>
    </div>
  );
}
